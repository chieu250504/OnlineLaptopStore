@model Laptop88_3.Models.User

@{
    ViewBag.Title = "Thêm người dùng mới";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="product-form-container">
    <h2>Thêm người dùng mới</h2>

    @using (Html.BeginForm("Create", "UserManagement", FormMethod.Post))
    {
        @Html.AntiForgeryToken()

        <div class="form-group">
            @Html.LabelFor(m => m.Username)
            @Html.TextBoxFor(m => m.Username, new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.Username, "", new { @class = "text-danger" })
        </div>

        <div class="form-group">
            @Html.LabelFor(m => m.PasswordHash, "Mật khẩu")
            @Html.PasswordFor(m => m.PasswordHash, new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.PasswordHash, "", new { @class = "text-danger" })
        </div>

        <div class="form-group">
            @Html.LabelFor(m => m.Email)
            @Html.TextBoxFor(m => m.Email, new { @class = "form-control", type = "email" })
            @Html.ValidationMessageFor(m => m.Email, "", new { @class = "text-danger" })
        </div>

        <div class="form-group">
            @Html.LabelFor(m => m.FullName, "Họ và tên")
            @Html.TextBoxFor(m => m.FullName, new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.FullName, "", new { @class = "text-danger" })
        </div>

        <div class="form-group">
            @Html.LabelFor(m => m.PhoneNumber, "Số điện thoại")
            @Html.TextBoxFor(m => m.PhoneNumber, new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.PhoneNumber, "", new { @class = "text-danger" })
        </div>

        <div class="form-group">
            @Html.LabelFor(m => m.Address)
            @Html.TextBoxFor(m => m.Address, new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.Address, "", new { @class = "text-danger" })
        </div>

        <div class="form-group">
            @Html.LabelFor(m => m.Role, "Vai trò")
            @Html.DropDownListFor(m => m.Role,
                new SelectList(new[]
                {
                    new { Value = "Admin", Text = "Admin" },
                    new { Value = "Staff", Text = "Staff" },
                    new { Value = "User", Text = "User" }
                }, "Value", "Text", Model.Role),
                "-- Chọn vai trò --",
                new { @class = "form-control" })
            @Html.ValidationMessageFor(m => m.Role, "", new { @class = "text-danger" })
        </div>

        <button type="submit" class="btn btn-success">Thêm người dùng</button>
        <a href="@Url.Action("Index", "UserManagement")" class="btn btn-secondary">Hủy</a>
    }
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
@if (TempData["SuccessAdd"] != null)
{
    <script>
        var result = confirm("Thêm người dùng thành công!\nBạn có muốn tiếp tục thêm người dùng khác không?");
        if (result) {
            window.location.href = '@Url.Action("Create", "UserManagement")';
        } else {
            window.location.href = '@Url.Action("Index", "UserManagement")';
        }
    </script>
}
